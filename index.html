<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Mon Suivi 4 Mois</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="MonSuivi">
<link rel="apple-touch-icon" href="https://via.placeholder.com/180/FF5733/FFFFFF?text=Fit">
    
    <style>
        .ios-blur { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); }
        body { background-color: #f2f2f7; font-family: -apple-system, sans-serif; }
    </style>
</head>
<body class="pb-24">

    <div class="p-6">
        <h1 class="text-3xl font-extrabold tracking-tight">Aujourd'hui</h1>
        <p class="text-gray-500 font-medium">Objectif : <span class="text-orange-500 text-lg">2200 kcal</span></p>
    </div>

    <div class="flex space-x-4 px-6 overflow-x-auto no-scrollbar mb-8">
        <div class="flex-shrink-0 w-14 h-20 bg-blue-600 rounded-2xl flex flex-col items-center justify-center text-white shadow-lg">
            <span class="text-[10px] uppercase font-bold">Jeu</span>
            <span class="text-xl font-bold">1</span>
        </div>
        </div>

    <div class="px-6 space-y-4" id="timeline">
        
        <div class="ios-blur rounded-3xl p-5 shadow-sm border border-white/50">
            <div class="flex justify-between items-center mb-4">
                <div>
                    <h3 class="font-bold text-gray-800 text-lg">Petit D√©jeuner</h3>
                    <p class="text-sm text-gray-400">En attente de photo...</p>
                </div>
                <input type="file" accept="image/*" capture="environment" id="photoInput" class="hidden">
                <button onclick="document.getElementById('photoInput').click()" class="bg-blue-100 p-4 rounded-2xl active:scale-90 transition-transform">
                    <span class="text-2xl">üì∏</span>
                </button>
            </div>
            <div id="preview" class="w-full h-40 bg-gray-100 rounded-2xl hidden overflow-hidden">
                <img id="imgPreview" src="" class="w-full h-full object-cover">
            </div>
        </div>

    </div>

    <nav class="fixed bottom-6 left-6 right-6 h-16 ios-blur rounded-full shadow-2xl flex justify-around items-center border border-white/20">
        <button class="text-2xl">üìÖ</button>
        <button class="text-2xl opacity-30">üìä</button>
        <button class="text-2xl opacity-30">‚öôÔ∏è</button>
    </nav>

    <script>
// 1. Tes donn√©es physiques r√©elles (issues de ta balance)
const donneesPhysiques = {
    poidsActuel: 126.8,
    metabolismeBase: 2136,
    objectifCalories: 2250, // D√©ficit l√©ger pour perdre gras sans perdre muscle
    proteinesCible: 190 // Environ 1.5g par kilo de poids
};

// 2. Ta base de donn√©es locale (charg√©e depuis le t√©l√©phone ou vide)
let maJournee = JSON.parse(localStorage.getItem('monPlan')) || [
    { id: 1, type: 'repas', titre: 'Petit-D√©jeuner', heure: '08:00', icone: 'ü•£', calories: 500 },
    { id: 2, type: 'cours', titre: 'Cours du matin', heure: '09:00', icone: 'üìö' }
];

// 3. Fonction pour mettre √† jour l'affichage des calories en haut
function mettreAJourResume() {
    const totalMange = maJournee
        .filter(i => i.type === 'repas')
        .reduce((sum, i) => sum + (i.calories || 0), 0);
    
    const totalBrule = maJournee
        .filter(i => i.type === 'sport')
        .reduce((sum, i) => sum + (i.calories || 0), 0);

    const reste = donneesPhysiques.objectifCalories - totalMange + totalBrule;
    
    // On met √† jour le texte dans le Header (si tu as mis les bons ID)
    document.querySelector('p.text-gray-500').innerHTML = `
        Mang√©: <span class="text-orange-500 font-bold">${totalMange}</span> | 
        Br√ªl√©: <span class="text-green-500 font-bold">${totalBrule}</span><br>
        Reste: <span class="text-blue-600 font-bold text-xl">${Math.round(reste)} kcal</span>
    `;
}

// Appelle cette fonction √† la fin de chargerTimeline()
function chargerTimeline() {
    // ... (garde ton code pr√©c√©dent ici) ...
    mettreAJourResume();
}

// 3. Gestion de la photo
function ouvrirAppareilPhoto(id) {
    const input = document.getElementById('photoInput');
    input.onchange = e => {
        const [file] = e.target.files;
        if (file) {
            const previewZone = document.getElementById(`preview-${id}`);
            const imgTag = document.getElementById(`img-${id}`);
            imgTag.src = URL.createObjectURL(file);
            previewZone.classList.remove('hidden');

            // SIMULATION IA : On estime les calories selon le repas
            // Plus tard, l'IA analysera vraiment l'image ici
            const estimation = 450; 
            const item = maJournee.find(i => i.id === id);
            if(item) {
                item.calories = estimation;
                localStorage.setItem('monPlan', JSON.stringify(maJournee));
                mettreAJourResume();
            }
        }
    };
    input.click();
}

// Lancer au chargement
chargerTimeline();
    </script>
</body>
</html>
